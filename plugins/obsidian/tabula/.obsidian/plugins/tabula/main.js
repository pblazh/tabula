/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var lt=Object.create;var de=Object.defineProperty;var ct=Object.getOwnPropertyDescriptor;var ut=Object.getOwnPropertyNames;var ht=Object.getPrototypeOf,dt=Object.prototype.hasOwnProperty;var pt=(s,n)=>()=>(n||s((n={exports:{}}).exports,n),n.exports),ft=(s,n)=>{for(var r in n)de(s,r,{get:n[r],enumerable:!0})},ze=(s,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let c of ut(n))!dt.call(s,c)&&c!==r&&de(s,c,{get:()=>n[c],enumerable:!(o=ct(n,c))||o.enumerable});return s};var Te=(s,n,r)=>(r=s!=null?lt(ht(s)):{},ze(n||!s||!s.__esModule?de(r,"default",{value:s,enumerable:!0}):r,s)),mt=s=>ze(de({},"__esModule",{value:!0}),s);var qe=pt((Re,Le)=>{((s,n)=>{typeof define=="function"&&define.amd?define([],n):typeof Le=="object"&&typeof Re!="undefined"?Le.exports=n():s.Papa=n()})(Re,function s(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},r,o=!n.document&&!!n.postMessage,c=n.IS_PAPA_WORKER||!1,l={},u=0,a={};function m(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var i=xe(t);i.chunkSize=parseInt(i.chunkSize),t.step||t.chunk||(i.chunkSize=null),this._handle=new le(i),(this._handle.streamer=this)._config=i}.call(this,e),this.parseChunk=function(t,i){var d=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<d){let b=this._config.newline;b||(h=this._config.quoteChar||'"',b=this._handle.guessLineEndings(t,h)),t=[...t.split(b).slice(d)].join(b)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(h=this._config.beforeFirstChunk(t))!==void 0&&(t=h),this.isFirstChunk=!1,this._halted=!1;var d=this._partialLine+t,h=(this._partialLine="",this._handle.parse(d,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=h.meta.cursor,d=(this._finished||(this._partialLine=d.substring(t-this._baseIndex),this._baseIndex=t),h&&h.data&&(this._rowCount+=h.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),c)n.postMessage({results:h,workerId:a.WORKER_ID,finished:d});else if(R(this._config.chunk)&&!i){if(this._config.chunk(h,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=h=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(h.data),this._completeResults.errors=this._completeResults.errors.concat(h.errors),this._completeResults.meta=h.meta),this._completed||!d||!R(this._config.complete)||h&&h.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),d||h&&h.meta.paused||this._nextChunk(),h}this._halted=!0},this._sendError=function(t){R(this._config.error)?this._config.error(t):c&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function S(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),m.call(this,e),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(i){this._input=i,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),o||(t.onload=ne(this._chunkLoaded,this),t.onerror=ne(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var i,d=this._config.downloadRequestHeaders;for(i in d)t.setRequestHeader(i,d[i])}var h;this._config.chunkSize&&(h=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+h));try{t.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}o&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(i=>(i=i.getResponseHeader("Content-Range"))!==null?parseInt(i.substring(i.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(i){i=t.statusText||i,this._sendError(new Error(i))}}function T(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),m.call(this,e);var t,i,d=typeof FileReader!="undefined";this.stream=function(h){this._input=h,i=h.slice||h.webkitSlice||h.mozSlice,d?((t=new FileReader).onload=ne(this._chunkLoaded,this),t.onerror=ne(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var h=this._input,b=(this._config.chunkSize&&(b=Math.min(this._start+this._config.chunkSize,this._input.size),h=i.call(h,this._start,b)),t.readAsText(h,this._config.encoding));d||this._chunkLoaded({target:{result:b}})},this._chunkLoaded=function(h){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(h.target.result)},this._chunkError=function(){this._sendError(t.error)}}function L(e){var t;m.call(this,e=e||{}),this.stream=function(i){return t=i,this._nextChunk()},this._nextChunk=function(){var i,d;if(!this._finished)return i=this._config.chunkSize,t=i?(d=t.substring(0,i),t.substring(i)):(d=t,""),this._finished=!t,this.parseChunk(d)}}function re(e){m.call(this,e=e||{});var t=[],i=!0,d=!1;this.pause=function(){m.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){m.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(h){this._input=h,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){d&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):i=!0},this._streamData=ne(function(h){try{t.push(typeof h=="string"?h:h.toString(this._config.encoding)),i&&(i=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(b){this._streamError(b)}},this),this._streamError=ne(function(h){this._streamCleanUp(),this._sendError(h)},this),this._streamEnd=ne(function(){this._streamCleanUp(),d=!0,this._streamData("")},this),this._streamCleanUp=ne(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function le(e){var t,i,d,h,b=Math.pow(2,53),V=-b,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,A=0,f=0,W=!1,g=!1,_=[],p={data:[],errors:[],meta:{}};function P(E){return e.skipEmptyLines==="greedy"?E.join("").trim()==="":E.length===1&&E[0].length===0}function F(){if(p&&d&&(J("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),d=!1),e.skipEmptyLines&&(p.data=p.data.filter(function(D){return!P(D)})),q()){let D=function(j,O){R(e.transformHeader)&&(j=e.transformHeader(j,O)),_.push(j)};var w=D;if(p)if(Array.isArray(p.data[0])){for(var E=0;q()&&E<p.data.length;E++)p.data[E].forEach(D);p.data.splice(0,1)}else p.data.forEach(D)}function k(D,j){for(var O=e.header?{}:[],x=0;x<D.length;x++){var v=x,U=D[x],U=((C,M)=>(N=>(e.dynamicTypingFunction&&e.dynamicTyping[N]===void 0&&(e.dynamicTyping[N]=e.dynamicTypingFunction(N)),(e.dynamicTyping[N]||e.dynamicTyping)===!0))(C)?M==="true"||M==="TRUE"||M!=="false"&&M!=="FALSE"&&((N=>{if(Y.test(N)&&(N=parseFloat(N),V<N&&N<b))return 1})(M)?parseFloat(M):Q.test(M)?new Date(M):M===""?null:M):M)(v=e.header?x>=_.length?"__parsed_extra":_[x]:v,U=e.transform?e.transform(U,v):U);v==="__parsed_extra"?(O[v]=O[v]||[],O[v].push(U)):O[v]=U}return e.header&&(x>_.length?J("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+x,f+j):x<_.length&&J("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+x,f+j)),O}var I;p&&(e.header||e.dynamicTyping||e.transform)&&(I=1,!p.data.length||Array.isArray(p.data[0])?(p.data=p.data.map(k),I=p.data.length):p.data=k(p.data,0),e.header&&p.meta&&(p.meta.fields=_),f+=I)}function q(){return e.header&&_.length===0}function J(E,k,I,w){E={type:E,code:k,message:I},w!==void 0&&(E.row=w),p.errors.push(E)}R(e.step)&&(h=e.step,e.step=function(E){p=E,q()?F():(F(),p.data.length!==0&&(A+=E.data.length,e.preview&&A>e.preview?i.abort():(p.data=p.data[0],h(p,y))))}),this.parse=function(E,k,I){var w=e.quoteChar||'"',w=(e.newline||(e.newline=this.guessLineEndings(E,w)),d=!1,e.delimiter?R(e.delimiter)&&(e.delimiter=e.delimiter(E),p.meta.delimiter=e.delimiter):((w=((D,j,O,x,v)=>{var U,C,M,N;v=v||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var ie=0;ie<v.length;ie++){for(var G,ce=v[ie],H=0,X=0,z=0,K=(M=void 0,new Ce({comments:x,delimiter:ce,newline:j,preview:10}).parse(D)),ee=0;ee<K.data.length;ee++)O&&P(K.data[ee])?z++:(G=K.data[ee].length,X+=G,M===void 0?M=G:0<G&&(H+=Math.abs(G-M),M=G));0<K.data.length&&(X/=K.data.length-z),(C===void 0||H<=C)&&(N===void 0||N<X)&&1.99<X&&(C=H,U=ce,N=X)}return{successful:!!(e.delimiter=U),bestDelimiter:U}})(E,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=w.bestDelimiter:(d=!0,e.delimiter=a.DefaultDelimiter),p.meta.delimiter=e.delimiter),xe(e));return e.preview&&e.header&&w.preview++,t=E,i=new Ce(w),p=i.parse(t,k,I),F(),W?{meta:{paused:!0}}:p||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,i.abort(),t=R(e.chunk)?"":t.substring(i.getCharIndex())},this.resume=function(){y.streamer._halted?(W=!1,y.streamer.parseChunk(t,!0)):setTimeout(y.resume,3)},this.aborted=function(){return g},this.abort=function(){g=!0,i.abort(),p.meta.aborted=!0,R(e.complete)&&e.complete(p),t=""},this.guessLineEndings=function(D,w){D=D.substring(0,1048576);var w=new RegExp($(w)+"([^]*?)"+$(w),"gm"),I=(D=D.replace(w,"")).split("\r"),w=D.split(`
`),D=1<w.length&&w[0].length<I[0].length;if(I.length===1||D)return`
`;for(var j=0,O=0;O<I.length;O++)I[O][0]===`
`&&j++;return j>=I.length/2?`\r
`:"\r"}}function $(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Ce(e){var t=(e=e||{}).delimiter,i=e.newline,d=e.comments,h=e.step,b=e.preview,V=e.fastMode,Y=null,Q=!1,y=e.quoteChar==null?'"':e.quoteChar,A=y;if(e.escapeChar!==void 0&&(A=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),d===t)throw new Error("Comment character same as delimiter");d===!0?d="#":(typeof d!="string"||-1<a.BAD_DELIMITERS.indexOf(d))&&(d=!1),i!==`
`&&i!=="\r"&&i!==`\r
`&&(i=`
`);var f=0,W=!1;this.parse=function(g,_,p){if(typeof g!="string")throw new Error("Input must be a string");var P=g.length,F=t.length,q=i.length,J=d.length,E=R(h),k=[],I=[],w=[],D=f=0;if(!g)return H();if(V||V!==!1&&g.indexOf(y)===-1){for(var j=g.split(i),O=0;O<j.length;O++){if(w=j[O],f+=w.length,O!==j.length-1)f+=i.length;else if(p)return H();if(!d||w.substring(0,J)!==d){if(E){if(k=[],N(w.split(t)),X(),W)return H()}else N(w.split(t));if(b&&b<=O)return k=k.slice(0,b),H(!0)}}return H()}for(var x=g.indexOf(t,f),v=g.indexOf(i,f),U=new RegExp($(A)+$(y),"g"),C=g.indexOf(y,f);;)if(g[f]===y)for(C=f,f++;;){if((C=g.indexOf(y,C+1))===-1)return p||I.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:k.length,index:f}),G();if(C===P-1)return G(g.substring(f,C).replace(U,y));if(y===A&&g[C+1]===A)C++;else if(y===A||C===0||g[C-1]!==A){x!==-1&&x<C+1&&(x=g.indexOf(t,C+1));var M=ie((v=v!==-1&&v<C+1?g.indexOf(i,C+1):v)===-1?x:Math.min(x,v));if(g.substr(C+1+M,F)===t){w.push(g.substring(f,C).replace(U,y)),g[f=C+1+M+F]!==y&&(C=g.indexOf(y,f)),x=g.indexOf(t,f),v=g.indexOf(i,f);break}if(M=ie(v),g.substring(C+1+M,C+1+M+q)===i){if(w.push(g.substring(f,C).replace(U,y)),ce(C+1+M+q),x=g.indexOf(t,f),C=g.indexOf(y,f),E&&(X(),W))return H();if(b&&k.length>=b)return H(!0);break}I.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:k.length,index:f}),C++}}else if(d&&w.length===0&&g.substring(f,f+J)===d){if(v===-1)return H();f=v+q,v=g.indexOf(i,f),x=g.indexOf(t,f)}else if(x!==-1&&(x<v||v===-1))w.push(g.substring(f,x)),f=x+F,x=g.indexOf(t,f);else{if(v===-1)break;if(w.push(g.substring(f,v)),ce(v+q),E&&(X(),W))return H();if(b&&k.length>=b)return H(!0)}return G();function N(z){k.push(z),D=f}function ie(z){var K=0;return K=z!==-1&&(z=g.substring(C+1,z))&&z.trim()===""?z.length:K}function G(z){return p||(z===void 0&&(z=g.substring(f)),w.push(z),f=P,N(w),E&&X()),H()}function ce(z){f=z,N(w),w=[],v=g.indexOf(i,f)}function H(z){if(e.header&&!_&&k.length&&!Q){var K=k[0],ee=Object.create(null),Se=new Set(K);let Ne=!1;for(let se=0;se<K.length;se++){let Z=K[se];if(ee[Z=R(e.transformHeader)?e.transformHeader(Z,se):Z]){let ue,je=ee[Z];for(;ue=Z+"_"+je,je++,Se.has(ue););Se.add(ue),K[se]=ue,ee[Z]++,Ne=!0,(Y=Y===null?{}:Y)[ue]=Z}else ee[Z]=1,K[se]=Z;Se.add(Z)}Ne&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:k,errors:I,meta:{delimiter:t,linebreak:i,aborted:W,truncated:!!z,cursor:D+(_||0),renamedHeaders:Y}}}function X(){h(H()),k=[],I=[]}},this.abort=function(){W=!0},this.getCharIndex=function(){return f}}function at(e){var t=e.data,i=l[t.workerId],d=!1;if(t.error)i.userError(t.error,t.file);else if(t.results&&t.results.data){var h={abort:function(){d=!0,Ve(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Pe,resume:Pe};if(R(i.userStep)){for(var b=0;b<t.results.data.length&&(i.userStep({data:t.results.data[b],errors:t.results.errors,meta:t.results.meta},h),!d);b++);delete t.results}else R(i.userChunk)&&(i.userChunk(t.results,h,t.file),delete t.results)}t.finished&&!d&&Ve(t.workerId,t.results)}function Ve(e,t){var i=l[e];R(i.userComplete)&&i.userComplete(t),i.terminate(),delete l[e]}function Pe(){throw new Error("Not implemented.")}function xe(e){if(typeof e!="object"||e===null)return e;var t,i=Array.isArray(e)?[]:{};for(t in e)i[t]=xe(e[t]);return i}function ne(e,t){return function(){e.apply(t,arguments)}}function R(e){return typeof e=="function"}return a.parse=function(e,t){var i=(t=t||{}).dynamicTyping||!1;if(R(i)&&(t.dynamicTypingFunction=i,i={}),t.dynamicTyping=i,t.transform=!!R(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return i=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(d=>d.charCodeAt(0)!==65279?d:d.slice(1))(e),i=new(t.download?S:L)(t)):e.readable===!0&&R(e.read)&&R(e.on)?i=new re(t):(n.File&&e instanceof File||e instanceof Object)&&(i=new T(t)),i.stream(e);(i=(()=>{var d;return!!a.WORKERS_SUPPORTED&&(d=(()=>{var h=n.URL||n.webkitURL||null,b=s.toString();return a.BLOB_URL||(a.BLOB_URL=h.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",b,")();"],{type:"text/javascript"})))})(),(d=new n.Worker(d)).onmessage=at,d.id=u++,l[d.id]=d)})()).userStep=t.step,i.userChunk=t.chunk,i.userComplete=t.complete,i.userError=t.error,t.step=R(t.step),t.chunk=R(t.chunk),t.complete=R(t.complete),t.error=R(t.error),delete t.worker,i.postMessage({input:e,config:t,workerId:i.id})},a.unparse=function(e,t){var i=!1,d=!0,h=",",b=`\r
`,V='"',Y=V+V,Q=!1,y=null,A=!1,f=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(_){return t.delimiter.indexOf(_)!==-1}).length||(h=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(i=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(Q=t.skipEmptyLines),typeof t.newline=="string"&&(b=t.newline),typeof t.quoteChar=="string"&&(V=t.quoteChar),typeof t.header=="boolean"&&(d=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");y=t.columns}t.escapeChar!==void 0&&(Y=t.escapeChar+V),t.escapeFormulae instanceof RegExp?A=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(A=/^[=+\-@\t\r].*$/)}})(),new RegExp($(V),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return W(null,e,Q);if(typeof e[0]=="object")return W(y||Object.keys(e[0]),e,Q)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||y),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),W(e.fields||[],e.data||[],Q);throw new Error("Unable to serialize unrecognized input");function W(_,p,P){var F="",q=(typeof _=="string"&&(_=JSON.parse(_)),typeof p=="string"&&(p=JSON.parse(p)),Array.isArray(_)&&0<_.length),J=!Array.isArray(p[0]);if(q&&d){for(var E=0;E<_.length;E++)0<E&&(F+=h),F+=g(_[E],E);0<p.length&&(F+=b)}for(var k=0;k<p.length;k++){var I=(q?_:p[k]).length,w=!1,D=q?Object.keys(p[k]).length===0:p[k].length===0;if(P&&!q&&(w=P==="greedy"?p[k].join("").trim()==="":p[k].length===1&&p[k][0].length===0),P==="greedy"&&q){for(var j=[],O=0;O<I;O++){var x=J?_[O]:O;j.push(p[k][x])}w=j.join("").trim()===""}if(!w){for(var v=0;v<I;v++){0<v&&!D&&(F+=h);var U=q&&J?_[v]:v;F+=g(p[k][U],v)}k<p.length-1&&(!P||0<I&&!D)&&(F+=b)}}return F}function g(_,p){var P,F;return _==null?"":_.constructor===Date?JSON.stringify(_).slice(1,25):(F=!1,A&&typeof _=="string"&&A.test(_)&&(_="'"+_,F=!0),P=_.toString().replace(f,Y),(F=F||i===!0||typeof i=="function"&&i(_,p)||Array.isArray(i)&&i[p]||((q,J)=>{for(var E=0;E<J.length;E++)if(-1<q.indexOf(J[E]))return!0;return!1})(P,a.BAD_DELIMITERS)||-1<P.indexOf(h)||P.charAt(0)===" "||P.charAt(P.length-1)===" ")?V+P+V:P)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=Ce,a.ParserHandle=le,a.NetworkStreamer=S,a.FileStreamer=T,a.StringStreamer=L,a.ReadableStreamStreamer=re,n.jQuery&&((r=n.jQuery).fn.parse=function(e){var t=e.config||{},i=[];return this.each(function(b){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var V=0;V<this.files.length;V++)i.push({file:this.files[V],inputElem:this,instanceConfig:r.extend({},t)})}),d(),this;function d(){if(i.length===0)R(e.complete)&&e.complete();else{var b,V,Y,Q,y=i[0];if(R(e.before)){var A=e.before(y.file,y.inputElem);if(typeof A=="object"){if(A.action==="abort")return b="AbortError",V=y.file,Y=y.inputElem,Q=A.reason,void(R(e.error)&&e.error({name:b},V,Y,Q));if(A.action==="skip")return void h();typeof A.config=="object"&&(y.instanceConfig=r.extend(y.instanceConfig,A.config))}else if(A==="skip")return void h()}var f=y.instanceConfig.complete;y.instanceConfig.complete=function(W){R(f)&&f(W,y.file,y.inputElem),h()},a.parse(y.file,y.instanceConfig)}}function h(){i.splice(0,1),d()}}),c&&(n.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?n.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&n.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(S.prototype=Object.create(m.prototype)).constructor=S,(T.prototype=Object.create(m.prototype)).constructor=T,(L.prototype=Object.create(L.prototype)).constructor=L,(re.prototype=Object.create(m.prototype)).constructor=re,a})});var _t={};ft(_t,{default:()=>Ee});module.exports=mt(_t);var ke=require("obsidian");var te=require("obsidian"),be=Te(require("child_process")),he=Te(require("path"));var pe=Te(qe()),We=(s,n)=>{let r={header:!1,dynamicTyping:!1,delimiter:","},o={},c=[],l=n.split(`
`),u=0;for(let a of l){if(a.startsWith(s.comment))o[u]=a;else{let m=(0,pe.parse)(a,r);if(m.data.length===0)continue;c.push(m.data[0].map(S=>S.trim()))}u++}return{data:c,comments:o}},Ue=(s,n,r)=>{let o=[];for(let l of n){r[o.length]&&o.push(r[o.length]);let u=(0,pe.unparse)([l],s);o.push(u)}let c=Object.entries(r).filter(([l])=>parseInt(l)>=o.length);c.sort(([l],[u])=>parseInt(l)-parseInt(u));for(let[,l]of c)o.push(l);return o.join(`
`)};var He=require("obsidian"),fe=class{static async withRetry(n,r=3,o=500){let c=new Error("Unknown error occurred");for(let l=0;l<=r;l++)try{return await n()}catch(u){if(c=u,!(u instanceof Error&&(u.message.includes("EBUSY")||u.message.includes("busy")||u.message.includes("locked")))||l===r)break;l===0&&new He.Notice(`File is busy. Retrying... (${l+1}/${r})`),await new Promise(m=>setTimeout(m,o))}throw c}};var Be=(s,n)=>{n.splice(s+1,0,Array(n[0].length).fill(""))},$e=(s,n)=>{n.splice(s,0,Array(n[0].length).fill(""))},Ke=(s,n)=>{n.forEach(r=>r.splice(s+1,0,""))},Ye=(s,n)=>{n.forEach(r=>r.splice(s,0,""))},Qe=(s,n)=>{n.length<=1||n.splice(s,1)},Je=(s,n)=>{n[0].length<1||n.forEach(r=>r.splice(s,1))},De=(s,n,r)=>{if(Ge(s,n,r.length))return;let o=r.splice(s,1)[0];r.splice(n,0,o)},Oe=(s,n,r)=>{Ge(s,n,r[0].length)||r.forEach(o=>{let c=o.splice(s,1)[0];o.splice(n,0,c)})},Ge=(s,n,r)=>s<0||n<0||s>=r||n>=r,Xe=s=>{let n="";do n=String.fromCharCode(65+s%26)+n,s=Math.floor(s/26)-1;while(s>=0);return n},Ze=s=>{if(!s||s.length===0)return[[""]];let n=0;for(let o of s)o&&(n=Math.max(n,o.length));return s.map(o=>{let c=o?[...o]:[];for(;c.length<n;)c.push("");return c})};function et(s,n){s.empty();let r=document.createDocumentFragment(),o=r.createEl("thead").createEl("tr");n[0]&&Array(n[0].length+1).fill(null).forEach((l,u)=>{let a=o.createEl("th",{cls:u?"csv-column-number":"csv-column-number csv-column-number-first",attr:{"data-x":u-1}});a.textContent=u>0?Xe(u-1):""});let c=r.createEl("tbody");for(let l=0;l<n.length;l++){let u=n[l],a=c.createEl("tr"),m=a.createEl("td",{cls:"csv-row-number",attr:{"data-y":l}});m.textContent=(l+1).toString(),u.forEach((S,T)=>{a.createEl("td").createEl("input",{cls:"csv-cell-input",attr:{value:S,"data-y":l,"data-x":T}})})}s.appendChild(r)}var tt=(s,n,r)=>[{label:"contextMenu.insertBefore",action:()=>{$e(n,r),s()}},{label:"contextMenu.insertAfter",action:()=>{Be(n,r),s()}},{label:"contextMenu.moveUp",action:()=>{De(n,n-1,r),s()}},{label:"contextMenu.moveDown",action:()=>{De(n,n+1,r),s()}},{label:"contextMenu.delete",action:()=>{Qe(n,r),s()}}],nt=(s,n,r)=>[{label:"contextMenu.delete",action:()=>{Je(n,r),s()}},{label:"contextMenu.insertBefore",action:()=>{Ye(n,r),s()}},{label:"contextMenu.insertAfter",action:()=>{Ke(n,r),s()}},{label:"contextMenu.moveLeft",action:()=>{Oe(n,n-1,r),s()}},{label:"contextMenu.moveRight",action:()=>{Oe(n,n+1,r),s()}}];var rt={csv:{error:"Error",parsingFailed:"Failed to parse CSV. Please check file format."},settings:{fieldSeparator:"Field Separator",fieldSeparatorDesc:"The character used to separate fields (e.g., comma, semicolon, tab)",quoteChar:"Quote Character",quoteCharDesc:"Character used to enclose fields containing special characters"},contextMenu:{delete:"Delete",insertBefore:"Insert before",insertAfter:"Insert after",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right"}};var gt={en:rt},Me=class{constructor(n){this.locale="en";this.setLocale(n||"en")}setLocale(n){console.log(`I18n: Attempting to set locale to '${n}'`),n.toLowerCase().startsWith("en")?this.locale="en":this.locale="en"}t(n,r){let o=this.getTranslation(n,this.locale);o===null&&this.locale!=="en"&&(console.warn(`I18n: Key '${n}' not found in '${this.locale}', falling back to 'en'.`),o=this.getTranslation(n,"en"));let c=o!=null?o:n;return r&&Object.keys(r).forEach(l=>{let u=`{${l}}`;c=c.replace(new RegExp(u,"g"),String(r[l]))}),c}getTranslation(n,r){let o=gt[r],c=n.split("."),l=o;for(let u of c)if(l&&typeof l=="object"&&u in l)l=l[u];else return null;return typeof l=="string"?l:null}getCurrentLocale(){return this.locale}},me=new Me;var Ae=(s,n,r)=>{let o=document.createElement("div");o.className="context-menu";let c=a=>{o.contains(a.target)||u()},l=a=>{a.key==="Escape"&&u()},u=()=>{o.remove(),document.removeEventListener("mousedown",c),document.removeEventListener("keydown",l)};return document.addEventListener("mousedown",c),document.addEventListener("keydown",l),Object.assign(o.style,{left:`${n}px`,top:`${r}px`}),s.forEach(a=>{let m=document.createElement("div");m.className="context-menu-item",m.textContent=me.t(a.label),m.onclick=S=>{S.stopPropagation(),S.preventDefault(),a.action(),u()},o.appendChild(m)}),document.body.appendChild(o),u};function Ie(s,n,r){let o=()=>{},c=l=>{let u=l.target,a=u.classList.contains("csv-row-number"),m=u.classList.contains("csv-column-number");if(!a&&!m)return()=>{};l.preventDefault();let S=u.dataset;if(a){let T=parseInt(String(S==null?void 0:S.y));if(isNaN(T))return;let L=tt(n,T,r);o=Ae(L,l.pageX,l.pageY)}if(m){let T=parseInt(String(S==null?void 0:S.x));if(isNaN(T))return;let L=nt(n,T,r);o=Ae(L,l.pageX,l.pageY)}};return s.addEventListener("contextmenu",c),()=>{s.removeEventListener("contextmenu",c),o()}}var it=require("fs"),ve="csv-view",ge=class extends te.TextFileView{constructor(r,o){super(r);this.settings=o;this.tableData=[];this.tableComments={};this.headerContextMenuCleanup=null;this.setupSafeSave()}getIcon(){return"table"}getViewData(){var u;if(!this.file)return"";let r=Ue(this.settings,this.tableData,this.tableComments),o=he.join((u=this.file)==null?void 0:u.vault.adapter.basePath,this.file.path),c=bt(o,this.tableComments);console.log("proramm",c);let l=be.execSync(`${this.settings.tabula} -a -e '${c}'`,{input:r});return console.log(l.toString()),l.toString()}setupSafeSave(){this.originalRequestSave=this.requestSave,this.requestSave=async()=>{try{await fe.withRetry(async()=>(this.originalRequestSave(),Promise.resolve())).then(async()=>{})}catch(r){new te.Notice(`Failed to save file: ${r.message}. The file might be open in another program.`)}}}execute(r){return new Promise((o,c)=>{new te.Notice("executing");let l=be.spawn(this.settings.tabula,["-a","-u",r],{env:process.env,shell:!0});l.stderr.on("data",u=>{new te.Notice("Err:"+u.toString()),c()}),l.stdout.on("data",u=>{new te.Notice("Out:"+u.toString()),c()}),l.on("close",()=>{new te.Notice("executing"),o()})})}setViewData(r,o){let{data:c,comments:l}=We(this.settings,r);this.tableData=Ze(c||[]),this.tableComments=l,this.refresh()}refresh(){this.contentEl&&(this.contentEl.querySelectorAll(".csv-source-mode").forEach(r=>r.remove()),(!this.tableData||!Array.isArray(this.tableData))&&(console.warn("Table data not properly initialized, setting default"),this.tableData=[]),et(this.tableEl,this.tableData),this.headerContextMenuCleanup&&(this.headerContextMenuCleanup(),this.headerContextMenuCleanup=null),this.headerContextMenuCleanup=Ie(this.tableEl,()=>{this.refresh(),this.requestSave()},this.tableData))}clear(){this.tableData=[],this.refresh()}getViewType(){return ve}async onOpen(){var r,o;try{let c=(o=(r=this.headerEl)==null?void 0:r.querySelector)==null?void 0:o.call(r,".view-actions");if(c&&!c.querySelector(".csv-switch-source")){let a=document.createElement("button");a.className="clickable-icon csv-switch-source",a.setAttribute("aria-label","Switch to source mode"),a.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><polyline points="10 13 8 15 10 17"/><polyline points="14 13 16 15 14 17"/></svg>',a.onclick=async()=>{let m=this.file;if(!m)return;let S=this.app.workspace.getLeavesOfType("csv-source-view"),T=!1;for(let L of S)if(L.view&&L.view.file&&L.view.file.path===m.path){this.app.workspace.setActiveLeaf(L,!0,!0),T=!0;break}if(!T){let L=this.app.workspace.getLeaf(!0);await L.openFile(m,{active:!0,state:{mode:"source"}}),await L.setViewState({type:"csv-source-view",active:!0,state:{file:m.path}}),this.app.workspace.setActiveLeaf(L,!0,!0)}},c.appendChild(a)}this.contentEl.empty();let u=this.contentEl.createEl("div",{cls:"table-wrapper"}).createEl("div",{cls:"table-container main-scroll"});this.tableEl=u.createEl("table",{cls:"table"}),this.tableEl.addEventListener("input",a=>{if(a.target instanceof HTMLInputElement){let m=a.target.dataset,S=parseInt(String(m==null?void 0:m.x)),T=parseInt(String(m==null?void 0:m.y));if(isNaN(S)||isNaN(T))return;this.tableData[S][T]=a.target.value,this.requestSave()}}),(!this.tableData||!Array.isArray(this.tableData))&&(this.tableData=[]),this.refresh()}catch(c){console.error("Error in onOpen:",c),new te.Notice(`Failed to open CSV view: ${c.message}`),this.contentEl.empty();let l=this.contentEl.createEl("div",{cls:"csv-error"});l.createEl("h3",{text:"Error opening CSV file"}),l.createEl("p",{text:c.message}),this.tableData=[],this.tableEl=this.contentEl.createEl("table"),this.refresh()}}setTableContent(r){this.tableData=r,this.refresh()}getTableContent(){return this.tableData}async onClose(){this.headerContextMenuCleanup&&(this.headerContextMenuCleanup(),this.headerContextMenuCleanup=null),this.contentEl.empty()}};function bt(s,n){let r=[],o=Object.entries(n);o.sort(([u],[a])=>parseInt(u)-parseInt(a));let c=o.map(([,u])=>u);console.log("comments",c);for(let u of c)if(u.startsWith("#")){if(u.startsWith("#tabulafile:")){let a=u.slice(12),m=vt(s,a);r.push(...m.split(`
`))}if(u.startsWith("#tabula:")){let a=u.slice(8);r.push(a)}}let l=r.filter(u=>!/^\s*\/\/.*/.test(u)).filter(Boolean);return console.log("raw",r),console.log("stripped",l),l.join("")}function vt(s,n){let r=he.join(he.dirname(s),n);return(0,it.readFileSync)(r).toString()}var ot=require("obsidian"),we=require("@codemirror/state"),B=require("@codemirror/view"),oe=require("@codemirror/commands"),Fe="csv-source-view",yt=B.ViewPlugin.fromClass(class{constructor(s){this.decorations=st(s)}update(s){(s.docChanged||s.viewportChanged)&&(this.decorations=st(s.view))}},{decorations:s=>s.decorations});function st(s){let n=new we.RangeSetBuilder,r=/[;,	]/g;for(let{from:o,to:c}of s.visibleRanges){let l=s.state.doc.sliceString(o,c),u;for(;(u=r.exec(l))!==null;){let a=o+u.index;n.add(a,a+1,B.Decoration.mark({class:"csv-separator-highlight"}))}}return n.finish()}var ye=class extends ot.TextFileView{constructor(r){super(r);this.file=this.file,this.headerEl=this.headerEl}getViewType(){return Fe}getDisplayText(){return this.file?`CSV source: ${this.file.basename}`:"CSV source"}getIcon(){return"file-code"}async onOpen(){var m,S;let r=(S=(m=this.headerEl)==null?void 0:m.querySelector)==null?void 0:S.call(m,".view-actions");if(r&&!r.querySelector(".csv-switch-table")){let T=document.createElement("button");T.className="clickable-icon csv-switch-table",T.setAttribute("aria-label","Switch to table mode"),T.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-table"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M3 15h18"/><path d="M9 21V3"/><path d="M15 21V3"/></svg>',T.onclick=async()=>{let L=this.file;if(!L)return;let re=this.app.workspace.getLeavesOfType("csv-view"),le=!1;for(let $ of re)if($.view&&$.view.file&&$.view.file.path===L.path){this.app.workspace.setActiveLeaf($,!0,!0),le=!0;break}if(!le){let $=this.app.workspace.getLeaf(!0);await $.openFile(L,{active:!0}),await $.setViewState({type:"csv-view",active:!0,state:{file:L.path}}),this.app.workspace.setActiveLeaf($,!0,!0)}},r.appendChild(T)}let o=this.containerEl.children[1];o.empty();let l=o.createDiv({cls:"csv-source-editor-container"}).createDiv({cls:"csv-source-cm-container"}),u=[(0,B.lineNumbers)(),(0,B.drawSelection)(),(0,oe.history)(),B.keymap.of([...oe.defaultKeymap,...oe.historyKeymap]),yt,(0,B.placeholder)("Enter CSV source code..."),B.EditorView.lineWrapping,B.EditorView.updateListener.of(T=>{T.docChanged&&this.save()})],a=we.EditorState.create({doc:this.data||"",extensions:u});this.editor=new B.EditorView({state:a,parent:l}),this.addEditorStyles(),setTimeout(()=>this.editor.focus(),10)}addEditorStyles(){let r=document.createElement("style");r.textContent=`
      .csv-source-editor-container {
        height: 100%;
        display: flex;
        flex-direction: column;
      }
      .csv-source-toolbar {
        padding: 8px 12px;
        border-bottom: 1px solid var(--background-modifier-border);
        background: var(--background-secondary);
        font-weight: 500;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      .csv-source-title {
        font-size: 14px;
        font-weight: 600;
        color: var(--text-normal);
      }
      .csv-source-button-group {
        display: flex;
        gap: 4px;
      }
      .csv-source-button {
        background: var(--interactive-normal);
        color: var(--text-normal);
        border: 1px solid var(--background-modifier-border);
        border-radius: 4px;
        padding: 4px 8px;
        font-size: 12px;
        cursor: pointer;
        transition: all 0.1s ease;
      }
      .csv-source-button:hover {
        background: var(--interactive-hover);
      }
      .csv-source-cm-container {
        flex: 1;
        overflow: auto;
        height: 100%;
      }
      .csv-source-cm-container .cm-editor {
        height: 100%;
      }
      .csv-source-cm-container .cm-scroller {
        font-family: var(--font-monospace);
        font-size: 14px;
        line-height: 1.5;
      }
      .csv-source-cm-container .cm-content {
        padding: 12px;
      }
      .cm-line .csv-separator-highlight {
        color: var(--color-accent);
        font-weight: bold;
        background: var(--background-modifier-active-hover);
        border-radius: 2px;
      }
      .csv-source-cm-container .cm-cursor {
        border-left: 2px solid var(--color-accent);
        /* Compatible with light/dark themes, use theme primary color */
        background: none;
        opacity: 1;
        z-index: 10;
      }
      .csv-source-cm-container .cm-gutters {
        background: var(--background-secondary);
        color: var(--text-faint);
        border-right: 1px solid var(--background-modifier-border);
      }
      .csv-source-cm-container .cm-lineNumbers .cm-gutterElement {
        color: var(--text-faint);
      }
    `,document.head.appendChild(r),this.register(()=>{document.head.removeChild(r)})}async onClose(){await this.save()}getViewData(){return this.editor?this.editor.state.doc.toString():this.data||""}setViewData(r,o){if(o&&this.clear(),this.data=r,this.editor){let c=this.editor.state.update({changes:{from:0,to:this.editor.state.doc.length,insert:r}});this.editor.dispatch(c)}}clear(){if(this.data="",this.editor){let r=this.editor.state.update({changes:{from:0,to:this.editor.state.doc.length,insert:""}});this.editor.dispatch(r)}}};var ae=require("obsidian"),_e=class extends ae.PluginSettingTab{constructor(r,o){super(r,o);this.plugin=o}display(){let{containerEl:r}=this;r.empty(),new ae.Setting(r).setName("Tabula executable path").setDesc("absolute path to the tabula executable on just tabula if in $PATH").addText(o=>o.setPlaceholder("tabula").setValue(this.plugin.settings.tabula).onChange(async c=>{this.plugin.settings.tabula=c,await this.plugin.saveSettings()})),new ae.Setting(r).setName("CSV comments prefix").setDesc("If a line in a CSV staarts with this value it's ignored and treated as a comment").addText(o=>o.setPlaceholder("comment").setValue(this.plugin.settings.comment).onChange(async c=>{this.plugin.settings.comment=c,await this.plugin.saveSettings()})),new ae.Setting(r).setName("CSV delimieter").setDesc("delimieter used to separate filelds in csv").addText(o=>o.setPlaceholder(",").setValue(this.plugin.settings.delimiter).onChange(async c=>{this.plugin.settings.delimiter=c,await this.plugin.saveSettings()}))}};var wt={tabula:"tabula",delimiter:",",comment:"#",quote:'"'},Ee=class extends ke.Plugin{async onload(){await this.loadSettings(),this.addSettingTab(new _e(this.app,this));let r=ke.moment.locale();me.setLocale(r),this.registerView(ve,o=>new ge(o,this.settings)),this.registerView(Fe,o=>new ye(o)),this.registerExtensions(["csv"],ve)}onunload(){}async loadSettings(){this.settings=Object.assign({},wt,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};
/*! Bundled license information:

papaparse/papaparse.min.js:
  (* @license
  Papa Parse
  v5.5.3
  https://github.com/mholt/PapaParse
  License: MIT
  *)
*/
