/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var yt=Object.create;var de=Object.defineProperty;var Et=Object.getOwnPropertyDescriptor;var _t=Object.getOwnPropertyNames;var xt=Object.getPrototypeOf,St=Object.prototype.hasOwnProperty;var Tt=(i,n)=>()=>(n||i((n={exports:{}}).exports,n),n.exports),Ct=(i,n)=>{for(var r in n)de(i,r,{get:n[r],enumerable:!0})},He=(i,n,r,o)=>{if(n&&typeof n=="object"||typeof n=="function")for(let l of _t(n))!St.call(i,l)&&l!==r&&de(i,l,{get:()=>n[l],enumerable:!(o=Et(n,l))||o.enumerable});return i};var fe=(i,n,r)=>(r=i!=null?yt(xt(i)):{},He(n||!i||!i.__esModule?de(r,"default",{value:i,enumerable:!0}):r,i)),kt=i=>He(de({},"__esModule",{value:!0}),i);var We=Tt((De,Oe)=>{((i,n)=>{typeof define=="function"&&define.amd?define([],n):typeof Oe=="object"&&typeof De!="undefined"?Oe.exports=n():i.Papa=n()})(De,function i(){var n=typeof self!="undefined"?self:typeof window!="undefined"?window:n!==void 0?n:{},r,o=!n.document&&!!n.postMessage,l=n.IS_PAPA_WORKER||!1,c={},d=0,a={};function p(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var s=Re(t);s.chunkSize=parseInt(s.chunkSize),t.step||t.chunk||(s.chunkSize=null),this._handle=new ce(s),(this._handle.streamer=this)._config=s}.call(this,e),this.parseChunk=function(t,s){var h=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<h){let b=this._config.newline;b||(u=this._config.quoteChar||'"',b=this._handle.guessLineEndings(t,u)),t=[...t.split(b).slice(h)].join(b)}this.isFirstChunk&&R(this._config.beforeFirstChunk)&&(u=this._config.beforeFirstChunk(t))!==void 0&&(t=u),this.isFirstChunk=!1,this._halted=!1;var h=this._partialLine+t,u=(this._partialLine="",this._handle.parse(h,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=u.meta.cursor,h=(this._finished||(this._partialLine=h.substring(t-this._baseIndex),this._baseIndex=t),u&&u.data&&(this._rowCount+=u.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),l)n.postMessage({results:u,workerId:a.WORKER_ID,finished:h});else if(R(this._config.chunk)&&!s){if(this._config.chunk(u,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=u=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(u.data),this._completeResults.errors=this._completeResults.errors.concat(u.errors),this._completeResults.meta=u.meta),this._completed||!h||!R(this._config.complete)||u&&u.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),h||u&&u.meta.paused||this._nextChunk(),u}this._halted=!0},this._sendError=function(t){R(this._config.error)?this._config.error(t):l&&this._config.error&&n.postMessage({workerId:a.WORKER_ID,error:t,finished:!1})}}function m(e){var t;(e=e||{}).chunkSize||(e.chunkSize=a.RemoteChunkSize),p.call(this,e),this._nextChunk=o?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(s){this._input=s,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),o||(t.onload=re(this._chunkLoaded,this),t.onerror=re(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!o),this._config.downloadRequestHeaders){var s,h=this._config.downloadRequestHeaders;for(s in h)t.setRequestHeader(s,h[s])}var u;this._config.chunkSize&&(u=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+u));try{t.send(this._config.downloadRequestBody)}catch(b){this._chunkError(b.message)}o&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(s=>(s=s.getResponseHeader("Content-Range"))!==null?parseInt(s.substring(s.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(s){s=t.statusText||s,this._sendError(new Error(s))}}function S(e){(e=e||{}).chunkSize||(e.chunkSize=a.LocalChunkSize),p.call(this,e);var t,s,h=typeof FileReader!="undefined";this.stream=function(u){this._input=u,s=u.slice||u.webkitSlice||u.mozSlice,h?((t=new FileReader).onload=re(this._chunkLoaded,this),t.onerror=re(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var u=this._input,b=(this._config.chunkSize&&(b=Math.min(this._start+this._config.chunkSize,this._input.size),u=s.call(u,this._start,b)),t.readAsText(u,this._config.encoding));h||this._chunkLoaded({target:{result:b}})},this._chunkLoaded=function(u){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(u.target.result)},this._chunkError=function(){this._sendError(t.error)}}function L(e){var t;p.call(this,e=e||{}),this.stream=function(s){return t=s,this._nextChunk()},this._nextChunk=function(){var s,h;if(!this._finished)return s=this._config.chunkSize,t=s?(h=t.substring(0,s),t.substring(s)):(h=t,""),this._finished=!t,this.parseChunk(h)}}function ie(e){p.call(this,e=e||{});var t=[],s=!0,h=!1;this.pause=function(){p.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){p.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(u){this._input=u,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){h&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):s=!0},this._streamData=re(function(u){try{t.push(typeof u=="string"?u:u.toString(this._config.encoding)),s&&(s=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(b){this._streamError(b)}},this),this._streamError=re(function(u){this._streamCleanUp(),this._sendError(u)},this),this._streamEnd=re(function(){this._streamCleanUp(),h=!0,this._streamData("")},this),this._streamCleanUp=re(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function ce(e){var t,s,h,u,b=Math.pow(2,53),F=-b,Y=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,y=this,M=0,g=0,z=!1,v=!1,_=[],f={data:[],errors:[],meta:{}};function V(x){return e.skipEmptyLines==="greedy"?x.join("").trim()==="":x.length===1&&x[0].length===0}function P(){if(f&&h&&(J("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+a.DefaultDelimiter+"'"),h=!1),e.skipEmptyLines&&(f.data=f.data.filter(function(D){return!V(D)})),j()){let D=function($,O){R(e.transformHeader)&&($=e.transformHeader($,O)),_.push($)};var E=D;if(f)if(Array.isArray(f.data[0])){for(var x=0;j()&&x<f.data.length;x++)f.data[x].forEach(D);f.data.splice(0,1)}else f.data.forEach(D)}function T(D,$){for(var O=e.header?{}:[],k=0;k<D.length;k++){var w=k,U=D[k],U=((C,A)=>(N=>(e.dynamicTypingFunction&&e.dynamicTyping[N]===void 0&&(e.dynamicTyping[N]=e.dynamicTypingFunction(N)),(e.dynamicTyping[N]||e.dynamicTyping)===!0))(C)?A==="true"||A==="TRUE"||A!=="false"&&A!=="FALSE"&&((N=>{if(Y.test(N)&&(N=parseFloat(N),F<N&&N<b))return 1})(A)?parseFloat(A):Q.test(A)?new Date(A):A===""?null:A):A)(w=e.header?k>=_.length?"__parsed_extra":_[k]:w,U=e.transform?e.transform(U,w):U);w==="__parsed_extra"?(O[w]=O[w]||[],O[w].push(U)):O[w]=U}return e.header&&(k>_.length?J("FieldMismatch","TooManyFields","Too many fields: expected "+_.length+" fields but parsed "+k,g+$):k<_.length&&J("FieldMismatch","TooFewFields","Too few fields: expected "+_.length+" fields but parsed "+k,g+$)),O}var I;f&&(e.header||e.dynamicTyping||e.transform)&&(I=1,!f.data.length||Array.isArray(f.data[0])?(f.data=f.data.map(T),I=f.data.length):f.data=T(f.data,0),e.header&&f.meta&&(f.meta.fields=_),g+=I)}function j(){return e.header&&_.length===0}function J(x,T,I,E){x={type:x,code:T,message:I},E!==void 0&&(x.row=E),f.errors.push(x)}R(e.step)&&(u=e.step,e.step=function(x){f=x,j()?P():(P(),f.data.length!==0&&(M+=x.data.length,e.preview&&M>e.preview?s.abort():(f.data=f.data[0],u(f,y))))}),this.parse=function(x,T,I){var E=e.quoteChar||'"',E=(e.newline||(e.newline=this.guessLineEndings(x,E)),h=!1,e.delimiter?R(e.delimiter)&&(e.delimiter=e.delimiter(x),f.meta.delimiter=e.delimiter):((E=((D,$,O,k,w)=>{var U,C,A,N;w=w||[",","	","|",";",a.RECORD_SEP,a.UNIT_SEP];for(var se=0;se<w.length;se++){for(var Z,ue=w[se],H=0,G=0,q=0,K=(A=void 0,new ke({comments:k,delimiter:ue,newline:$,preview:10}).parse(D)),te=0;te<K.data.length;te++)O&&V(K.data[te])?q++:(Z=K.data[te].length,G+=Z,A===void 0?A=Z:0<Z&&(H+=Math.abs(Z-A),A=Z));0<K.data.length&&(G/=K.data.length-q),(C===void 0||H<=C)&&(N===void 0||N<G)&&1.99<G&&(C=H,U=ue,N=G)}return{successful:!!(e.delimiter=U),bestDelimiter:U}})(x,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=E.bestDelimiter:(h=!0,e.delimiter=a.DefaultDelimiter),f.meta.delimiter=e.delimiter),Re(e));return e.preview&&e.header&&E.preview++,t=x,s=new ke(E),f=s.parse(t,T,I),P(),z?{meta:{paused:!0}}:f||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,s.abort(),t=R(e.chunk)?"":t.substring(s.getCharIndex())},this.resume=function(){y.streamer._halted?(z=!1,y.streamer.parseChunk(t,!0)):setTimeout(y.resume,3)},this.aborted=function(){return v},this.abort=function(){v=!0,s.abort(),f.meta.aborted=!0,R(e.complete)&&e.complete(f),t=""},this.guessLineEndings=function(D,E){D=D.substring(0,1048576);var E=new RegExp(B(E)+"([^]*?)"+B(E),"gm"),I=(D=D.replace(E,"")).split("\r"),E=D.split(`
`),D=1<E.length&&E[0].length<I[0].length;if(I.length===1||D)return`
`;for(var $=0,O=0;O<I.length;O++)I[O][0]===`
`&&$++;return $>=I.length/2?`\r
`:"\r"}}function B(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ke(e){var t=(e=e||{}).delimiter,s=e.newline,h=e.comments,u=e.step,b=e.preview,F=e.fastMode,Y=null,Q=!1,y=e.quoteChar==null?'"':e.quoteChar,M=y;if(e.escapeChar!==void 0&&(M=e.escapeChar),(typeof t!="string"||-1<a.BAD_DELIMITERS.indexOf(t))&&(t=","),h===t)throw new Error("Comment character same as delimiter");h===!0?h="#":(typeof h!="string"||-1<a.BAD_DELIMITERS.indexOf(h))&&(h=!1),s!==`
`&&s!=="\r"&&s!==`\r
`&&(s=`
`);var g=0,z=!1;this.parse=function(v,_,f){if(typeof v!="string")throw new Error("Input must be a string");var V=v.length,P=t.length,j=s.length,J=h.length,x=R(u),T=[],I=[],E=[],D=g=0;if(!v)return H();if(F||F!==!1&&v.indexOf(y)===-1){for(var $=v.split(s),O=0;O<$.length;O++){if(E=$[O],g+=E.length,O!==$.length-1)g+=s.length;else if(f)return H();if(!h||E.substring(0,J)!==h){if(x){if(T=[],N(E.split(t)),G(),z)return H()}else N(E.split(t));if(b&&b<=O)return T=T.slice(0,b),H(!0)}}return H()}for(var k=v.indexOf(t,g),w=v.indexOf(s,g),U=new RegExp(B(M)+B(y),"g"),C=v.indexOf(y,g);;)if(v[g]===y)for(C=g,g++;;){if((C=v.indexOf(y,C+1))===-1)return f||I.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:T.length,index:g}),Z();if(C===V-1)return Z(v.substring(g,C).replace(U,y));if(y===M&&v[C+1]===M)C++;else if(y===M||C===0||v[C-1]!==M){k!==-1&&k<C+1&&(k=v.indexOf(t,C+1));var A=se((w=w!==-1&&w<C+1?v.indexOf(s,C+1):w)===-1?k:Math.min(k,w));if(v.substr(C+1+A,P)===t){E.push(v.substring(g,C).replace(U,y)),v[g=C+1+A+P]!==y&&(C=v.indexOf(y,g)),k=v.indexOf(t,g),w=v.indexOf(s,g);break}if(A=se(w),v.substring(C+1+A,C+1+A+j)===s){if(E.push(v.substring(g,C).replace(U,y)),ue(C+1+A+j),k=v.indexOf(t,g),C=v.indexOf(y,g),x&&(G(),z))return H();if(b&&T.length>=b)return H(!0);break}I.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:T.length,index:g}),C++}}else if(h&&E.length===0&&v.substring(g,g+J)===h){if(w===-1)return H();g=w+j,w=v.indexOf(s,g),k=v.indexOf(t,g)}else if(k!==-1&&(k<w||w===-1))E.push(v.substring(g,k)),g=k+P,k=v.indexOf(t,g);else{if(w===-1)break;if(E.push(v.substring(g,w)),ue(w+j),x&&(G(),z))return H();if(b&&T.length>=b)return H(!0)}return Z();function N(q){T.push(q),D=g}function se(q){var K=0;return K=q!==-1&&(q=v.substring(C+1,q))&&q.trim()===""?q.length:K}function Z(q){return f||(q===void 0&&(q=v.substring(g)),E.push(q),g=V,N(E),x&&G()),H()}function ue(q){g=q,N(E),E=[],w=v.indexOf(s,g)}function H(q){if(e.header&&!_&&T.length&&!Q){var K=T[0],te=Object.create(null),Le=new Set(K);let ze=!1;for(let oe=0;oe<K.length;oe++){let X=K[oe];if(te[X=R(e.transformHeader)?e.transformHeader(X,oe):X]){let he,Ue=te[X];for(;he=X+"_"+Ue,Ue++,Le.has(he););Le.add(he),K[oe]=he,te[X]++,ze=!0,(Y=Y===null?{}:Y)[he]=X}else te[X]=1,K[oe]=X;Le.add(X)}ze&&console.warn("Duplicate headers found and renamed."),Q=!0}return{data:T,errors:I,meta:{delimiter:t,linebreak:s,aborted:z,truncated:!!q,cursor:D+(_||0),renamedHeaders:Y}}}function G(){u(H()),T=[],I=[]}},this.abort=function(){z=!0},this.getCharIndex=function(){return g}}function wt(e){var t=e.data,s=c[t.workerId],h=!1;if(t.error)s.userError(t.error,t.file);else if(t.results&&t.results.data){var u={abort:function(){h=!0,qe(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:je,resume:je};if(R(s.userStep)){for(var b=0;b<t.results.data.length&&(s.userStep({data:t.results.data[b],errors:t.results.errors,meta:t.results.meta},u),!h);b++);delete t.results}else R(s.userChunk)&&(s.userChunk(t.results,u,t.file),delete t.results)}t.finished&&!h&&qe(t.workerId,t.results)}function qe(e,t){var s=c[e];R(s.userComplete)&&s.userComplete(t),s.terminate(),delete c[e]}function je(){throw new Error("Not implemented.")}function Re(e){if(typeof e!="object"||e===null)return e;var t,s=Array.isArray(e)?[]:{};for(t in e)s[t]=Re(e[t]);return s}function re(e,t){return function(){e.apply(t,arguments)}}function R(e){return typeof e=="function"}return a.parse=function(e,t){var s=(t=t||{}).dynamicTyping||!1;if(R(s)&&(t.dynamicTypingFunction=s,s={}),t.dynamicTyping=s,t.transform=!!R(t.transform)&&t.transform,!t.worker||!a.WORKERS_SUPPORTED)return s=null,a.NODE_STREAM_INPUT,typeof e=="string"?(e=(h=>h.charCodeAt(0)!==65279?h:h.slice(1))(e),s=new(t.download?m:L)(t)):e.readable===!0&&R(e.read)&&R(e.on)?s=new ie(t):(n.File&&e instanceof File||e instanceof Object)&&(s=new S(t)),s.stream(e);(s=(()=>{var h;return!!a.WORKERS_SUPPORTED&&(h=(()=>{var u=n.URL||n.webkitURL||null,b=i.toString();return a.BLOB_URL||(a.BLOB_URL=u.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",b,")();"],{type:"text/javascript"})))})(),(h=new n.Worker(h)).onmessage=wt,h.id=d++,c[h.id]=h)})()).userStep=t.step,s.userChunk=t.chunk,s.userComplete=t.complete,s.userError=t.error,t.step=R(t.step),t.chunk=R(t.chunk),t.complete=R(t.complete),t.error=R(t.error),delete t.worker,s.postMessage({input:e,config:t,workerId:s.id})},a.unparse=function(e,t){var s=!1,h=!0,u=",",b=`\r
`,F='"',Y=F+F,Q=!1,y=null,M=!1,g=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||a.BAD_DELIMITERS.filter(function(_){return t.delimiter.indexOf(_)!==-1}).length||(u=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(s=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(Q=t.skipEmptyLines),typeof t.newline=="string"&&(b=t.newline),typeof t.quoteChar=="string"&&(F=t.quoteChar),typeof t.header=="boolean"&&(h=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");y=t.columns}t.escapeChar!==void 0&&(Y=t.escapeChar+F),t.escapeFormulae instanceof RegExp?M=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(M=/^[=+\-@\t\r].*$/)}})(),new RegExp(B(F),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return z(null,e,Q);if(typeof e[0]=="object")return z(y||Object.keys(e[0]),e,Q)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||y),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),z(e.fields||[],e.data||[],Q);throw new Error("Unable to serialize unrecognized input");function z(_,f,V){var P="",j=(typeof _=="string"&&(_=JSON.parse(_)),typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(_)&&0<_.length),J=!Array.isArray(f[0]);if(j&&h){for(var x=0;x<_.length;x++)0<x&&(P+=u),P+=v(_[x],x);0<f.length&&(P+=b)}for(var T=0;T<f.length;T++){var I=(j?_:f[T]).length,E=!1,D=j?Object.keys(f[T]).length===0:f[T].length===0;if(V&&!j&&(E=V==="greedy"?f[T].join("").trim()==="":f[T].length===1&&f[T][0].length===0),V==="greedy"&&j){for(var $=[],O=0;O<I;O++){var k=J?_[O]:O;$.push(f[T][k])}E=$.join("").trim()===""}if(!E){for(var w=0;w<I;w++){0<w&&!D&&(P+=u);var U=j&&J?_[w]:w;P+=v(f[T][U],w)}T<f.length-1&&(!V||0<I&&!D)&&(P+=b)}}return P}function v(_,f){var V,P;return _==null?"":_.constructor===Date?JSON.stringify(_).slice(1,25):(P=!1,M&&typeof _=="string"&&M.test(_)&&(_="'"+_,P=!0),V=_.toString().replace(g,Y),(P=P||s===!0||typeof s=="function"&&s(_,f)||Array.isArray(s)&&s[f]||((j,J)=>{for(var x=0;x<J.length;x++)if(-1<j.indexOf(J[x]))return!0;return!1})(V,a.BAD_DELIMITERS)||-1<V.indexOf(u)||V.charAt(0)===" "||V.charAt(V.length-1)===" ")?F+V+F:V)}},a.RECORD_SEP=String.fromCharCode(30),a.UNIT_SEP=String.fromCharCode(31),a.BYTE_ORDER_MARK="\uFEFF",a.BAD_DELIMITERS=["\r",`
`,'"',a.BYTE_ORDER_MARK],a.WORKERS_SUPPORTED=!o&&!!n.Worker,a.NODE_STREAM_INPUT=1,a.LocalChunkSize=10485760,a.RemoteChunkSize=5242880,a.DefaultDelimiter=",",a.Parser=ke,a.ParserHandle=ce,a.NetworkStreamer=m,a.FileStreamer=S,a.StringStreamer=L,a.ReadableStreamStreamer=ie,n.jQuery&&((r=n.jQuery).fn.parse=function(e){var t=e.config||{},s=[];return this.each(function(b){if(!(r(this).prop("tagName").toUpperCase()==="INPUT"&&r(this).attr("type").toLowerCase()==="file"&&n.FileReader)||!this.files||this.files.length===0)return!0;for(var F=0;F<this.files.length;F++)s.push({file:this.files[F],inputElem:this,instanceConfig:r.extend({},t)})}),h(),this;function h(){if(s.length===0)R(e.complete)&&e.complete();else{var b,F,Y,Q,y=s[0];if(R(e.before)){var M=e.before(y.file,y.inputElem);if(typeof M=="object"){if(M.action==="abort")return b="AbortError",F=y.file,Y=y.inputElem,Q=M.reason,void(R(e.error)&&e.error({name:b},F,Y,Q));if(M.action==="skip")return void u();typeof M.config=="object"&&(y.instanceConfig=r.extend(y.instanceConfig,M.config))}else if(M==="skip")return void u()}var g=y.instanceConfig.complete;y.instanceConfig.complete=function(z){R(g)&&g(z,y.file,y.inputElem),u()},a.parse(y.file,y.instanceConfig)}}function u(){s.splice(0,1),h()}}),l&&(n.onmessage=function(e){e=e.data,a.WORKER_ID===void 0&&e&&(a.WORKER_ID=e.workerId),typeof e.input=="string"?n.postMessage({workerId:a.WORKER_ID,results:a.parse(e.input,e.config),finished:!0}):(n.File&&e.input instanceof File||e.input instanceof Object)&&(e=a.parse(e.input,e.config))&&n.postMessage({workerId:a.WORKER_ID,results:e,finished:!0})}),(m.prototype=Object.create(p.prototype)).constructor=m,(S.prototype=Object.create(p.prototype)).constructor=S,(L.prototype=Object.create(L.prototype)).constructor=L,(ie.prototype=Object.create(p.prototype)).constructor=ie,a})});var Mt={};Ct(Mt,{default:()=>Te});module.exports=kt(Mt);var Ce=require("obsidian");var we=require("obsidian"),ft=fe(require("path"));var pe=fe(We());function Be(i,n){if(console.log("parse",n,i),!n||typeof n!="string")return{data:[],comments:{},errors:["Invalid CSV content"]};let r={header:!1,dynamicTyping:!1,quoteChar:i.quote||'"',delimiter:i.delimiter||",",skipEmptyLines:!1},o={},l=[],c=[],d=n.split(`
`),a=0;console.log("lines --->",d);for(let p of d){if(p.startsWith(i.comment||"#"))o[a]=p;else if(p.trim())try{let m=(0,pe.parse)(p,r);m.errors&&m.errors.length>0&&c.push(...m.errors.map(S=>`Line ${a+1}: ${S.message}`)),m.data&&m.data.length>0&&l.push(m.data[0].map(S=>String(S).trim()))}catch(m){c.push(`Line ${a+1}: Failed to parse - ${m instanceof Error?m.message:"Unknown error"}`)}a++}return console.log("--->",l),{data:l.length>0?l:[],comments:o,errors:c.length>0?c:void 0}}function Ke(i,n,r){if(!n||!Array.isArray(n))return"";let o=[],l=0;for(let d of n){if(r[l]&&o.push(r[l]),Array.isArray(d)){let a=(0,pe.unparse)([d],{delimiter:i.delimiter||",",header:!1});o.push(a)}l++}let c=Object.entries(r).filter(([d])=>parseInt(d)>=l);c.sort(([d],[a])=>parseInt(d)-parseInt(a));for(let[,d]of c)o.push(d);return o.join(`
`)}var ne=require("obsidian"),me=fe(require("child_process")),Ye=fe(require("path"));function Rt(i){if(!i||typeof i!="string")throw new Error("Invalid file path provided");let n=Ye.resolve(i);if(n.includes("..")||n.includes("~"))throw new Error("File path contains unsafe components");return n}function Qe(i){if(!i||typeof i!="string")throw new Error("Invalid executable name");if(!/^[a-zA-Z0-9._-]+$/.test(i))throw new Error("Executable name contains invalid characters");return i.trim()}async function Je(i,n,r=!0){try{let o=Rt(n),l=Qe(i);return r&&new ne.Notice("Executing tabula..."),new Promise(c=>{me.execFile(l,["-a","-u",o],{timeout:3e4,maxBuffer:1048576,env:{PATH:process.env.PATH,HOME:process.env.HOME}},(a,p,m)=>{if(a){let S=`Tabula execution failed: ${a.message}`;r&&new ne.Notice(S),c({success:!1,error:S,stderr:m==null?void 0:m.toString()});return}m&&m.trim()&&r&&new ne.Notice(`Tabula stderr: ${m}`),p&&p.trim()&&r&&new ne.Notice(`Tabula output: ${p}`),r&&new ne.Notice("Tabula execution completed"),c({success:!0,stdout:p==null?void 0:p.toString(),stderr:m==null?void 0:m.toString()})}).on("error",a=>{let p=`Process error: ${a.message}`;r&&new ne.Notice(p),c({success:!1,error:p})})})}catch(o){let l=`Security validation failed: ${o instanceof Error?o.message:"Unknown error"}`;return r&&new ne.Notice(l),{success:!1,error:l}}}async function Ze(i){try{let n=Qe(i);return new Promise(r=>{me.exec(`${n} --help`,o=>r(!o))})}catch(n){return!1}}var Ge=require("obsidian"),ge=class{static async withRetry(n,r=3,o=500){let l=new Error("Unknown error occurred");for(let c=0;c<=r;c++)try{return await n()}catch(d){if(l=d,!(d instanceof Error&&(d.message.includes("EBUSY")||d.message.includes("busy")||d.message.includes("locked")))||c===r)break;c===0&&new Ge.Notice(`File is busy. Retrying... (${c+1}/${r})`),await new Promise(p=>setTimeout(p,o))}throw l}};var Xe=(i,n)=>{n.splice(i+1,0,Array(n[0].length).fill(""))},et=(i,n)=>{n.splice(i,0,Array(n[0].length).fill(""))},tt=(i,n)=>{n.forEach(r=>r.splice(i+1,0,""))},rt=(i,n)=>{n.forEach(r=>r.splice(i,0,""))},nt=(i,n)=>{n.length<=1||n.splice(i,1)},it=(i,n)=>{n[0].length<1||n.forEach(r=>r.splice(i,1))},Ae=(i,n,r)=>{if(st(i,n,r.length))return;let o=r.splice(i,1)[0];r.splice(n,0,o)},Me=(i,n,r)=>{st(i,n,r[0].length)||r.forEach(o=>{let l=o.splice(i,1)[0];o.splice(n,0,l)})},st=(i,n,r)=>i<0||n<0||i>=r||n>=r,ot=i=>{let n="";do n=String.fromCharCode(65+i%26)+n,i=Math.floor(i/26)-1;while(i>=0);return n},at=i=>{if(!i||i.length===0)return[[""]];let n=0;for(let o of i)o&&(n=Math.max(n,o.length));return i.map(o=>{let l=o?[...o]:[];for(;l.length<n;)l.push("");return l})};var Ie=require("obsidian");function Lt(i,n){return{success:!1,error:i,warnings:n}}function Dt(i,n){return{success:!0,data:i,warnings:n}}async function lt(i,n="Operation failed"){try{let r=await i();return Dt(r)}catch(r){let o=r instanceof Error?r.message:String(r);return Lt(`${n}: ${o}`)}}function ee(i,n=5e3){new Ie.Notice(`Error: ${i}`,n)}function Pe(i,n=4e3){new Ie.Notice(`Warning: ${i}`,n)}function ct(i,n){i.empty();let r=document.createDocumentFragment(),o=r.createEl("thead").createEl("tr");n[0]&&Array(n[0].length+1).fill(null).forEach((c,d)=>{let a=o.createEl("th",{cls:d?"csv-column-number":"csv-column-number csv-column-number-first",attr:{"data-x":d-1}});a.textContent=d>0?ot(d-1):""});let l=r.createEl("tbody");for(let c=0;c<n.length;c++){let d=n[c],a=l.createEl("tr"),p=a.createEl("td",{cls:"csv-row-number",attr:{"data-y":c}});p.textContent=(c+1).toString(),d.forEach((m,S)=>{a.createEl("td").createEl("input",{cls:"csv-cell-input",attr:{value:m,"data-y":c,"data-x":S}})})}i.appendChild(r)}var ut=(i,n,r)=>[{label:"contextMenu.insertBefore",action:()=>{et(n,r),i()}},{label:"contextMenu.insertAfter",action:()=>{Xe(n,r),i()}},{label:"contextMenu.moveUp",action:()=>{Ae(n,n-1,r),i()}},{label:"contextMenu.moveDown",action:()=>{Ae(n,n+1,r),i()}},{label:"contextMenu.delete",action:()=>{nt(n,r),i()}}],ht=(i,n,r)=>[{label:"contextMenu.delete",action:()=>{it(n,r),i()}},{label:"contextMenu.insertBefore",action:()=>{rt(n,r),i()}},{label:"contextMenu.insertAfter",action:()=>{tt(n,r),i()}},{label:"contextMenu.moveLeft",action:()=>{Me(n,n-1,r),i()}},{label:"contextMenu.moveRight",action:()=>{Me(n,n+1,r),i()}}];var dt={csv:{error:"Error",parsingFailed:"Failed to parse CSV. Please check file format."},settings:{fieldSeparator:"Field Separator",fieldSeparatorDesc:"The character used to separate fields (e.g., comma, semicolon, tab)",quoteChar:"Quote Character",quoteCharDesc:"Character used to enclose fields containing special characters"},contextMenu:{delete:"Delete",insertBefore:"Insert before",insertAfter:"Insert after",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right"}};var Ot={en:dt},Fe=class{constructor(n){this.locale="en";this.setLocale(n||"en")}setLocale(n){console.log(`I18n: Attempting to set locale to '${n}'`),n.toLowerCase().startsWith("en")?this.locale="en":this.locale="en"}t(n,r){let o=this.getTranslation(n,this.locale);o===null&&this.locale!=="en"&&(console.warn(`I18n: Key '${n}' not found in '${this.locale}', falling back to 'en'.`),o=this.getTranslation(n,"en"));let l=o!=null?o:n;return r&&Object.keys(r).forEach(c=>{let d=`{${c}}`;l=l.replace(new RegExp(d,"g"),String(r[c]))}),l}getTranslation(n,r){let o=Ot[r],l=n.split("."),c=o;for(let d of l)if(c&&typeof c=="object"&&d in c)c=c[d];else return null;return typeof c=="string"?c:null}getCurrentLocale(){return this.locale}},ve=new Fe;var Ve=(i,n,r)=>{let o=document.createElement("div");o.className="context-menu";let l=a=>{o.contains(a.target)||d()},c=a=>{a.key==="Escape"&&d()},d=()=>{o.remove(),document.removeEventListener("mousedown",l),document.removeEventListener("keydown",c)};return document.addEventListener("mousedown",l),document.addEventListener("keydown",c),Object.assign(o.style,{left:`${n}px`,top:`${r}px`}),i.forEach(a=>{let p=document.createElement("div");p.className="context-menu-item",p.textContent=ve.t(a.label),p.onclick=m=>{m.stopPropagation(),m.preventDefault(),a.action(),d()},o.appendChild(p)}),document.body.appendChild(o),d};function Ne(i,n,r){let o=()=>{},l=c=>{let d=c.target,a=d.classList.contains("csv-row-number"),p=d.classList.contains("csv-column-number");if(!a&&!p)return;c.preventDefault();let m=d.dataset;if(a){let S=parseInt(String(m==null?void 0:m.y));if(isNaN(S))return;let L=ut(n,S,r);o=Ve(L,c.pageX,c.pageY)}if(p){let S=parseInt(String(m==null?void 0:m.x));if(isNaN(S))return;let L=ht(n,S,r);o=Ve(L,c.pageX,c.pageY)}};return i.addEventListener("contextmenu",l),()=>{i.removeEventListener("contextmenu",l),o()}}var ye="csv-view",be=class extends we.TextFileView{constructor(r,o){super(r);this.settings=o;this.tableData=[];this.tableComments={};this.headerContextMenuCleanup=null;this.viewState={isLoading:!1,hasError:!1};this.setupSafeSave()}getIcon(){return"table"}getViewData(){try{return Ke(this.settings,this.tableData,this.tableComments)}catch(r){return ee(`Failed to generate CSV content: ${r instanceof Error?r.message:"Unknown error"}`),""}}setupSafeSave(){this.originalRequestSave=this.requestSave,this.requestSave=async()=>{let r=await lt(async()=>{await ge.withRetry(async()=>(this.originalRequestSave(),Promise.resolve())),await this.executeTabula()},"Failed to save file");!r.success&&r.error&&ee(`${r.error}. The file might be open in another program.`)}}async executeTabula(){if(!this.file){ee("No file available for tabula execution");return}try{globalThis.clearInterval(this.interval),await new Promise(d=>{this.interval=globalThis.setTimeout(d,1e3)});let r=this.file.vault.adapter,o=r==null?void 0:r.basePath;if(!o){ee("Could not determine file path for tabula execution");return}let l=ft.join(o,this.file.path),c=await Je(this.settings.tabula,l);c.success||ee(c.error||"Tabula execution failed")}catch(r){ee(`Tabula execution error: ${r instanceof Error?r.message:"Unknown error"}`)}}setViewData(r,o){console.log("set view data:",r,o);try{this.viewState.isLoading=!0,this.viewState.hasError=!1;let l=Be(this.settings,r);l.errors&&l.errors.length>0&&console.warn("CSV parse warnings:",l.errors),this.tableData=at(l.data||[]),this.tableComments=l.comments,this.viewState.isLoading=!1}catch(l){this.viewState.isLoading=!1,this.viewState.hasError=!0,this.viewState.errorMessage=l instanceof Error?l.message:"Unknown error",ee(`Failed to parse CSV data: ${this.viewState.errorMessage}`),this.tableData=[[""]],this.tableComments={}}this.refresh()}refresh(){this.contentEl&&(this.contentEl.querySelectorAll(".csv-source-mode").forEach(r=>r.remove()),(!this.tableData||!Array.isArray(this.tableData))&&(console.warn("Table data not properly initialized, setting default"),this.tableData=[]),ct(this.tableEl,this.tableData),this.headerContextMenuCleanup&&(this.headerContextMenuCleanup(),this.headerContextMenuCleanup=null),this.headerContextMenuCleanup=Ne(this.tableEl,()=>{this.refresh(),this.requestSave()},this.tableData))}clear(){this.tableData=[],this.refresh()}getViewType(){return ye}async onOpen(){var r,o;try{let l=(o=(r=this.headerEl)==null?void 0:r.querySelector)==null?void 0:o.call(r,".view-actions");if(l&&!l.querySelector(".csv-switch-source")){let a=document.createElement("button");a.className="clickable-icon csv-switch-source",a.setAttribute("aria-label","Switch to source mode"),a.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-file-code"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/><polyline points="14 2 14 8 20 8"/><polyline points="10 13 8 15 10 17"/><polyline points="14 13 16 15 14 17"/></svg>',a.onclick=async()=>{let p=this.file;if(!p)return;let m=this.app.workspace.getLeavesOfType("csv-source-view"),S=!1;for(let L of m)if(L.view&&L.view.file&&L.view.file.path===p.path){this.app.workspace.setActiveLeaf(L,!0,!0),S=!0;break}if(!S){let L=this.app.workspace.getLeaf(!0);await L.openFile(p,{active:!0,state:{mode:"source"}}),await L.setViewState({type:"csv-source-view",active:!0,state:{file:p.path}}),this.app.workspace.setActiveLeaf(L,!0,!0)}},l.appendChild(a)}this.contentEl.empty();let d=this.contentEl.createEl("div",{cls:"table-wrapper"}).createEl("div",{cls:"table-container main-scroll"});this.tableEl=d.createEl("table",{cls:"table"}),this.tableEl.addEventListener("input",a=>{if(a.target instanceof HTMLInputElement){let p=a.target.dataset,m=parseInt(String(p==null?void 0:p.x)),S=parseInt(String(p==null?void 0:p.y));if(isNaN(m)||isNaN(S))return;this.tableData[m][S]=a.target.value,this.requestSave()}}),(!this.tableData||!Array.isArray(this.tableData))&&(this.tableData=[]),this.refresh()}catch(l){console.error("Error in onOpen:",l),new we.Notice(`Failed to open CSV view: ${l.message}`),this.contentEl.empty();let c=this.contentEl.createEl("div",{cls:"csv-error"});c.createEl("h3",{text:"Error opening CSV file"}),c.createEl("p",{text:l.message}),this.tableData=[],this.tableEl=this.contentEl.createEl("table"),this.refresh()}}setTableContent(r){this.tableData=r,this.refresh()}getTableContent(){return this.tableData}async onClose(){this.headerContextMenuCleanup&&(this.headerContextMenuCleanup(),this.headerContextMenuCleanup=null),this.contentEl.empty()}};var mt=require("obsidian"),_e=require("@codemirror/state"),W=require("@codemirror/view"),ae=require("@codemirror/commands"),$e="csv-source-view",At=W.ViewPlugin.fromClass(class{constructor(i){this.decorations=pt(i)}update(i){(i.docChanged||i.viewportChanged)&&(this.decorations=pt(i.view))}},{decorations:i=>i.decorations});function pt(i){let n=new _e.RangeSetBuilder,r=/[;,	]/g;for(let{from:o,to:l}of i.visibleRanges){let c=i.state.doc.sliceString(o,l),d;for(;(d=r.exec(c))!==null;){let a=o+d.index;n.add(a,a+1,W.Decoration.mark({class:"csv-separator-highlight"}))}}return n.finish()}var Ee=class extends mt.TextFileView{constructor(r){super(r);this.file=this.file,this.headerEl=this.headerEl}getViewType(){return $e}getDisplayText(){return this.file?`CSV source: ${this.file.basename}`:"CSV source"}getIcon(){return"file-code"}async onOpen(){var p,m;let r=(m=(p=this.headerEl)==null?void 0:p.querySelector)==null?void 0:m.call(p,".view-actions");if(r&&!r.querySelector(".csv-switch-table")){let S=document.createElement("button");S.className="clickable-icon csv-switch-table",S.setAttribute("aria-label","Switch to table mode"),S.innerHTML='<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-table"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M3 9h18"/><path d="M3 15h18"/><path d="M9 21V3"/><path d="M15 21V3"/></svg>',S.onclick=async()=>{let L=this.file;if(!L)return;let ie=this.app.workspace.getLeavesOfType("csv-view"),ce=!1;for(let B of ie)if(B.view&&B.view.file&&B.view.file.path===L.path){this.app.workspace.setActiveLeaf(B,!0,!0),ce=!0;break}if(!ce){let B=this.app.workspace.getLeaf(!0);await B.openFile(L,{active:!0}),await B.setViewState({type:"csv-view",active:!0,state:{file:L.path}}),this.app.workspace.setActiveLeaf(B,!0,!0)}},r.appendChild(S)}let o=this.containerEl.children[1];o.empty();let c=o.createDiv({cls:"csv-source-editor-container"}).createDiv({cls:"csv-source-cm-container"}),d=[(0,W.lineNumbers)(),(0,W.drawSelection)(),(0,ae.history)(),W.keymap.of([...ae.defaultKeymap,...ae.historyKeymap]),At,(0,W.placeholder)("Enter CSV source code..."),W.EditorView.lineWrapping,W.EditorView.updateListener.of(S=>{S.docChanged&&this.save()})],a=_e.EditorState.create({doc:this.data||"",extensions:d});this.editor=new W.EditorView({state:a,parent:c}),this.addEditorStyles(),setTimeout(()=>this.editor.focus(),10)}async addEditorStyles(){try{let r=`
.csv-source-editor-container {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.csv-source-toolbar {
  padding: 8px 12px;
  border-bottom: 1px solid var(--background-modifier-border);
  background: var(--background-secondary);
  font-weight: 500;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.csv-source-title {
  font-size: 14px;
  font-weight: 600;
  color: var(--text-normal);
}

.csv-source-button-group {
  display: flex;
  gap: 4px;
}

.csv-source-button {
  background: var(--interactive-normal);
  color: var(--text-normal);
  border: 1px solid var(--background-modifier-border);
  border-radius: 4px;
  padding: 4px 8px;
  font-size: 12px;
  cursor: pointer;
  transition: all 0.1s ease;
}

.csv-source-button:hover {
  background: var(--interactive-hover);
}

.csv-source-cm-container {
  flex: 1;
  overflow: auto;
  height: 100%;
}

.csv-source-cm-container .cm-editor {
  height: 100%;
}

.csv-source-cm-container .cm-scroller {
  font-family: var(--font-monospace);
  font-size: 14px;
  line-height: 1.5;
}

.csv-source-cm-container .cm-content {
  padding: 12px;
}

.cm-line .csv-separator-highlight {
  color: var(--color-accent);
  font-weight: bold;
  background: var(--background-modifier-active-hover);
  border-radius: 2px;
}

.csv-source-cm-container .cm-cursor {
  border-left: 2px solid var(--color-accent);
  background: none;
  opacity: 1;
  z-index: 10;
}

.csv-source-cm-container .cm-gutters {
  background: var(--background-secondary);
  color: var(--text-faint);
  border-right: 1px solid var(--background-modifier-border);
}

.csv-source-cm-container .cm-lineNumbers .cm-gutterElement {
  color: var(--text-faint);
}`,o=document.createElement("style");o.id="csv-source-view-styles",o.textContent=r,document.head.appendChild(o),this.register(()=>{o.parentNode&&o.parentNode.removeChild(o)})}catch(r){console.warn("Failed to load CSS styles:",r)}}async onClose(){await this.save()}getViewData(){return this.editor?this.editor.state.doc.toString():this.data||""}setViewData(r,o){if(o&&this.clear(),this.data=r,this.editor){let l=this.editor.state.update({changes:{from:0,to:this.editor.state.doc.length,insert:r}});this.editor.dispatch(l)}}clear(){if(this.data="",this.editor){let r=this.editor.state.update({changes:{from:0,to:this.editor.state.doc.length,insert:""}});this.editor.dispatch(r)}}};var le=require("obsidian");function xe(i){let n=[];return i.delimiter||n.push("Delimiter cannot be empty"),i.delimiter===i.quote&&n.push("Delimiter and quote character cannot be the same"),i.delimiter===i.comment&&n.push("Delimiter and comment prefix cannot be the same"),n}var Se=class extends le.PluginSettingTab{constructor(r,o){super(r,o);this.validationTimeout=null;this.plugin=o}display(){let{containerEl:r}=this;r.empty();let o=r.createDiv({cls:"setting-item-info"});o.createDiv({cls:"setting-item-name",text:"Settings Validation"});let l=o.createDiv({cls:"setting-item-description"});this.updateValidationStatus(l),new le.Setting(r).setName("Tabula executable path").setDesc("Absolute path to the tabula executable or just 'tabula' if in $PATH").addText(c=>c.setPlaceholder("tabula").setValue(this.plugin.settings.tabula).onChange(async d=>{this.plugin.settings.tabula=d.trim(),await this.plugin.saveSettings(),this.scheduleValidation(l)})),new le.Setting(r).setName("CSV comments prefix").setDesc("If a line in a CSV starts with this value it's ignored and treated as a comment").addText(c=>c.setPlaceholder("#").setValue(this.plugin.settings.comment).onChange(async d=>{this.plugin.settings.comment=d,await this.plugin.saveSettings(),this.scheduleValidation(l)})),new le.Setting(r).setName("CSV delimiter").setDesc("Delimiter used to separate fields in CSV").addText(c=>c.setPlaceholder(",").setValue(this.plugin.settings.delimiter).onChange(async d=>{if(!d.trim()){ee("Delimiter cannot be empty");return}this.plugin.settings.delimiter=d,await this.plugin.saveSettings(),this.scheduleValidation(l)}))}scheduleValidation(r){this.validationTimeout&&clearTimeout(this.validationTimeout),this.validationTimeout=setTimeout(()=>{this.updateValidationStatus(r)},500)}async updateValidationStatus(r){r.empty();let o=xe(this.plugin.settings),l=!1;try{l=await Ze(this.plugin.settings.tabula)}catch(c){}if(o.length===0&&l)r.createSpan({text:"\u2713 All settings are valid",cls:"setting-validation-success"});else{let c=[];o.length>0&&c.push(...o),l||c.push("Tabula executable not found or not accessible");let d=c.length===1?"Issue":"Issues";r.createSpan({text:`\u26A0 ${d}: ${c.join(", ")}`,cls:"setting-validation-error"})}}};var gt=i=>`Settings validation warnings: ${i.join(", ")}`,vt=i=>`Failed to load Tabula plugin: ${i.message}`;var bt={tabula:"tabula",delimiter:",",comment:"#",quote:'"'},Te=class extends Ce.Plugin{async onload(){try{await this.loadSettings();let r=xe(this.settings);r.length>0&&Pe(gt(r)),this.addSettingTab(new Se(this.app,this));let o=Ce.moment.locale();ve.setLocale(o),this.registerView(ye,l=>new be(l,this.settings)),this.registerView($e,l=>new Ee(l)),this.registerExtensions(["csv"],ye)}catch(r){console.error("Failed to load Tabula plugin:",r),Pe(vt(r))}}onunload(){}async loadSettings(){try{let r=await this.loadData();this.settings=Object.assign({},bt,r)}catch(r){console.error("Failed to load settings, using defaults:",r),this.settings={...bt}}}async saveSettings(){try{await this.saveData(this.settings)}catch(r){throw console.error("Failed to save settings:",r),r}}};
/*! Bundled license information:

papaparse/papaparse.min.js:
  (* @license
  Papa Parse
  v5.5.3
  https://github.com/mholt/PapaParse
  License: MIT
  *)
*/
